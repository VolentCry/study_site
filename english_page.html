<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Underwater School</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

    <style>
        /* --- –ü–ï–†–ï–ú–ï–ù–ù–´–ï –¶–í–ï–¢–û–í --- */
        :root {
            --color-light: #c5d0e6;
            --color-med: #a1b3d7;
            --color-dark: #7e96c7;
            --color-sand: #c7ba7e;
            --text-color: #ffffff;
            --input-bg: rgba(0, 0, 0, 0.4);
            --frame-bg: rgba(62, 78, 110, 0.85);
            --correct: #55ff55;
            --wrong: #ff5555;
        }

        /* --- –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Press Start 2P', cursive;
            color: var(--text-color);
            height: 100vh;
            overflow: hidden; 
            position: relative;
            background: linear-gradient(180deg, var(--color-light) 0%, var(--color-med) 40%, var(--color-dark) 80%, var(--color-sand) 100%);
            user-select: none;
        }

        /* --- –ú–ï–ù–Æ --- */
        .menu-container { position: absolute; top: 20px; left: 20px; z-index: 200; }
        .hamburger-icon { width: 40px; height: 35px; cursor: pointer; display: flex; flex-direction: column; justify-content: space-between; padding-bottom: 10px; }
        .line { width: 100%; height: 6px; background-color: white; box-shadow: 2px 2px 0px rgba(0,0,0,0.5); transition: 0.3s; }
        .sidebar { position: absolute; top: 50px; left: -320px; width: 260px; background-color: rgba(62, 78, 110, 0.95); border: 4px solid var(--color-light); padding: 10px; transition: left 0.3s ease-in-out; box-shadow: 6px 6px 0px rgba(0,0,0,0.5); }
        .menu-container:hover .sidebar { left: 0; }
        .menu-container:hover .line { background-color: var(--color-sand); }
        .menu-item { display: block; color: white; text-decoration: none; padding: 15px 10px; margin-bottom: 10px; border: 2px solid transparent; cursor: pointer; font-size: 0.8rem; line-height: 1.5; }
        .menu-item:hover { background-color: rgba(255, 255, 255, 0.1); border: 2px solid white; text-shadow: 2px 2px 0px #000; }

        /* --- –°–¢–†–ê–ù–ò–¶–´ --- */
        .page {
            width: 100%;
            height: 100vh;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            position: absolute;
            top: 0; left: 0;
            overflow-y: auto; 
            padding: 20px;
            padding-bottom: 100px;
        }
        .page.active { display: flex; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* –¢–ò–ü–û–ì–†–ê–§–ò–ö–ê */
        h1 { font-size: 1.5rem; margin-top: 50px; text-align: center; text-transform: uppercase; text-shadow: 3px 3px 0px #3f3f3f; line-height: 1.4; }
        h2 { font-size: 1rem; color: var(--color-sand); margin-top: 10px; text-align: center; text-shadow: 2px 2px 0 #000; }
        
        .instruction {
            font-size: 0.7rem; color: #e0e0e0; text-align: center; margin: 15px 0 30px 0;
            max-width: 800px; line-height: 1.5; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;
        }

        /* --- –ö–ù–û–ü–ö–ò --- */
        .mc-button {
            position: relative; font-family: 'Press Start 2P', cursive; font-size: 0.9rem; color: white;
            padding: 15px 25px; cursor: pointer; border: none; outline: none; background-color: var(--color-sand);
            overflow: hidden; z-index: 10; margin-top: 20px; margin-bottom: 20px;
            box-shadow: inset 3px 3px 0px rgba(255,255,255,0.5), inset -3px -3px 0px rgba(0,0,0,0.4), 3px 3px 0px #000;
        }
        .mc-button::before { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 0%; background-color: var(--color-dark); transition: height 0.4s ease-out; z-index: -1; }
        .mc-button:hover::before { height: 100%; }
        .mc-button:hover { transform: translateY(-2px); text-shadow: 2px 2px 0px #000; }
        .mc-button:active { transform: translateY(2px); box-shadow: inset 3px 3px 0px rgba(0,0,0,0.4), 2px 2px 0px #000; }

        /* --- –°–ï–¢–ö–ò –ó–ê–î–ê–ù–ò–ô --- */
        .task-container { width: 100%; max-width: 1000px; display: grid; gap: 15px; margin-bottom: 20px; }
        .grid-3-col { grid-template-columns: repeat(3, 1fr); }
        .grid-2-col { grid-template-columns: repeat(2, 1fr); max-width: 800px; }
        .grid-6-col { grid-template-columns: repeat(6, 1fr); }
        
        .task-item { display: flex; flex-direction: column; align-items: center; background: rgba(0, 0, 0, 0.2); padding: 10px; border: 2px solid var(--color-med); box-shadow: 4px 4px 0px rgba(0,0,0,0.3); }
        .image-placeholder { width: 100%; height: 80px; background-color: #566c86; border: 2px dashed var(--color-sand); display: flex; align-items: center; justify-content: center; margin-bottom: 10px; font-size: 0.5rem; text-align: center; color: #ddd; padding: 5px; }
        .text-frame { width: 100%; min-height: 100px; background-color: var(--frame-bg); border: 4px solid var(--color-light); padding: 10px; margin-bottom: 10px; color: white; font-size: 0.6rem; line-height: 1.6; display: flex; align-items: center; justify-content: center; text-align: center; }
        .mc-input { width: 100%; padding: 8px; font-family: 'Press Start 2P', cursive; font-size: 0.6rem; background-color: var(--input-bg); border: 2px solid white; color: white; text-align: center; outline: none; }
        .mc-input.correct { border-color: var(--correct); background-color: rgba(85, 255, 85, 0.2); }
        .mc-input.wrong { border-color: var(--wrong); background-color: rgba(255, 85, 85, 0.2); }

        /* --- –ó–ê–î–ê–ù–ò–ï 4 (DRAG & DROP) --- */
        .dnd-area { width: 100%; max-width: 900px; display: flex; flex-direction: column; gap: 30px; margin-bottom: 30px; }
        .scheme-row { background: rgba(0,0,0,0.2); padding: 15px; border: 2px solid var(--color-med); }
        .scheme-title { color: var(--color-sand); margin-bottom: 15px; font-size: 0.8rem; text-align: left; }
        .drop-zone-container { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        .drop-slot { width: 160px; height: 60px; border: 2px dashed #fff; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; }
        .draggable-item { padding: 10px 15px; background-color: var(--color-dark); border: 2px solid white; font-size: 0.6rem; cursor: grab; box-shadow: 2px 2px 0 #000; text-align: center; margin: 5px; }
        .draggable-item:active { cursor: grabbing; }
        .items-bank { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 20px; border: 4px solid var(--color-sand); background: rgba(0,0,0,0.3); min-height: 100px; }

        /* --- –ó–ê–î–ê–ù–ò–ï 5 (WEATHER) --- */
        .weather-radar { width: 100%; max-width: 600px; background: var(--frame-bg); border: 4px solid var(--color-med); padding: 20px; display: flex; flex-direction: column; align-items: center; box-shadow: 6px 6px 0 rgba(0,0,0,0.5); }
        .radar-screen { width: 100%; height: 120px; background-color: #001a33; border: 4px inset var(--color-dark); margin-bottom: 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #00ff00; text-shadow: 0 0 5px #00ff00; text-align: center; }
        .radar-label { font-size: 0.6rem; margin-bottom: 10px; opacity: 0.7; }
        .radar-value { font-size: 1.2rem; text-transform: uppercase; }
        .radar-controls { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; }
        .radar-btn { background: var(--color-light); color: #333; padding: 15px; font-family: inherit; font-size: 0.7rem; border: 2px solid #fff; cursor: pointer; box-shadow: 2px 2px 0 #000; transition: 0.2s; }
        .radar-btn:hover { background: #fff; transform: translateY(-2px); }
        .radar-btn.correct-choice { background: #55ff55 !important; }
        .radar-btn.wrong-choice { background: #ff5555 !important; }
        .score-board { margin-top: 15px; font-size: 0.8rem; color: var(--color-sand); }

        .result-text { font-size: 1.2rem; color: var(--color-sand); margin: 20px 0; display: none; text-shadow: 2px 2px 0 #000; text-align: center; line-height: 1.5; }

        @media (max-width: 900px) { .grid-6-col { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 600px) {
            h1 { font-size: 1rem; }
            .grid-3-col, .grid-6-col { grid-template-columns: repeat(2, 1fr); }
            .grid-2-col { grid-template-columns: 1fr; }
            .drop-zone-container { flex-direction: column; align-items: center; }
            .radar-controls { grid-template-columns: 1fr; }
        }

        .bubble { position: absolute; background-color: rgba(255, 255, 255, 0.4); display: block; pointer-events: none; z-index: 1; }
        .bubble-square { width: 20px; height: 20px; animation: rise 8s infinite linear; }
        @keyframes rise { 0% { transform: translateY(0) rotate(0deg); opacity: 0; } 10% { opacity: 1; } 100% { transform: translateY(-110vh) rotate(90deg); opacity: 0; } }

        .task-image {
            width: 375px;
            height: 275px; 
            object-fit: cover; 
            background-color: rgba(0,0,0,0.3);
            border: 2px solid var(--color-sand);
            margin-bottom: 10px;
            display: block;
            border-radius: 4px;
        }

        .task-3-image {
            width: 100px;
            height: 80px;
            object-fit: cover; 
            background-color: rgba(0,0,0,0.3);
            border: 2px solid var(--color-sand);
            margin-bottom: 10px;
            display: block;
            border-radius: 4px;
        }

        /* --- –ó–ê–î–ê–ù–ò–ï 6 (–¢–ê–ë–õ–ò–¶–ê –ú–ï–°–¢–û–ò–ú–ï–ù–ò–ô) --- */
        .pronoun-table {
            display: grid;
            grid-template-columns: 80px 1fr 1fr; 
            gap: 10px;
            max-width: 800px;
            width: 100%;
            margin-bottom: 30px;
            background: rgba(0,0,0,0.2);
            padding: 10px;
            border: 4px solid var(--color-med);
        }

        .table-header {
            color: var(--color-sand);
            font-size: 0.7rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            text-transform: uppercase;
        }

        .row-label {
            color: white;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--color-dark);
        }

        .pronoun-table .drop-slot {
            width: 100%; 
            height: 70px;
            border: 2px dashed rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>

    <!-- –ú–ï–ù–Æ -->
    <div class="menu-container">
        <div class="hamburger-icon">
            <div class="line"></div><div class="line"></div><div class="line"></div>
        </div>
        <nav class="sidebar">
            <div class="menu-item" onclick="switchPage('math')">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</div>
            <div class="menu-item" onclick="switchPage('english')">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫</div>
        </nav>
    </div>

    <!-- 1. –ì–õ–ê–í–ù–ê–Ø –ê–ù–ì–õ–ò–ô–°–ö–ò–ô -->
    <div id="page-english" class="page active">
        <h1>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ / English</h1>
        <button class="mc-button" onclick="startTest()">–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Ç–µ—Å—Ç ‚Ññ1</button>
    </div>

    <!-- 2. –ó–ê–î–ê–ù–ò–ï 1 -->
    <div id="page-task-1" class="page">
        <h1>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ1</h1>
        <h2>"–ù–∞–π–¥–∏ –ø—Ä–µ–¥–∞—Ç–µ–ª—è"</h2>
        <p class="instruction">–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–∞–∫–æ–π –ø—Ä–µ–¥–ª–æ–≥ –º–µ—Å—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω, –∏ –≤–ø–∏—à–∏—Ç–µ –µ–≥–æ –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ –ø–æ–ª–µ –ø–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–æ–π.</p>
        
        <div class="task-container grid-3-col">
            <!-- –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Å—Ç–∞–≤–∏–ª –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã, —Ç–∞–∫ –∫–∞–∫ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å -->
            <div class="task-item">
                <div class="image-placeholder">among.png</div>
                <input type="text" class="mc-input task1-input" data-ans="among">
            </div>
            <div class="task-item">
                <div class="image-placeholder">under.png</div>
                <input type="text" class="mc-input task1-input" data-ans="under">
            </div>
            <div class="task-item">
                <div class="image-placeholder">in.png</div>
                <input type="text" class="mc-input task1-input" data-ans="in">
            </div>
            <div class="task-item">
                <div class="image-placeholder">through.png</div>
                <input type="text" class="mc-input task1-input" data-ans="through">
            </div>
            <div class="task-item">
                <div class="image-placeholder">behind.png</div>
                <input type="text" class="mc-input task1-input" data-ans="behind">
            </div>
            <div class="task-item">
                <div class="image-placeholder">between.png</div>
                <input type="text" class="mc-input task1-input" data-ans="between">
            </div>
        </div>
        
        <div class="result-text" id="result-task-1"></div>
        <button class="mc-button" onclick="checkTask1()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    </div>

    <!-- 3. –ó–ê–î–ê–ù–ò–ï 2 -->
    <div id="page-task-2" class="page">
        <h1>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ2</h1>
        <h2>"–ü–æ–¥–±–µ—Ä–∏ —ç–º–æ—Ü–∏—é"</h2>
        <p class="instruction">–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –Ω–∞ —Ç–∞–±–ª–∏—á–∫–µ. –ù–∞–ø–∏—à–∏—Ç–µ —ç–º–æ—Ü–∏—é (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º), –∫–æ—Ç–æ—Ä—É—é –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂.</p>
        
        <div class="task-container grid-2-col">
            <div class="task-item"><div class="text-frame">Horror movie... very scary... not fun at all.</div><input type="text" class="mc-input task2-input" data-ans="scared"></div>
            <div class="task-item"><div class="text-frame">Brother broke my toy... shouted loudly!</div><input type="text" class="mc-input task2-input" data-ans="angry"></div>
            <div class="task-item"><div class="text-frame">Studied all night... eyes closing... want to sleep.</div><input type="text" class="mc-input task2-input" data-ans="tired"></div>
            <div class="task-item"><div class="text-frame">Came home... huge cake... didn't expect a party!</div><input type="text" class="mc-input task2-input" data-ans="surprised"></div>
        </div>
        <div class="result-text" id="result-task-2"></div>
        <button class="mc-button" onclick="checkTask2()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    </div>

    <!-- 4. –ó–ê–î–ê–ù–ò–ï 3 -->
    <div id="page-task-3" class="page">
        <h1>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ3</h1>
        <h2>"–ü–µ—Ä–µ–∫—É—Å"</h2>
        <p class="instruction">–í—Å–ø–æ–º–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –æ–≤–æ—â–µ–π –∏ —Ñ—Ä—É–∫—Ç–æ–≤. –í–≤–µ–¥–∏—Ç–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ–¥ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–æ–π.</p>
        
        <div class="task-container grid-6-col">
            <div class="task-item"><div class="image-placeholder">–°–º–æ—Ä–æ–¥–∏–Ω–∞</div><input type="text" class="mc-input task3-input" data-ans="currant"></div>
            <div class="task-item"><div class="image-placeholder">–ö—Ä—ã–∂–æ–≤–Ω–∏–∫</div><input type="text" class="mc-input task3-input" data-ans="gooseberry"></div>
            <div class="task-item"><div class="image-placeholder">–ß–µ—Å–Ω–æ–∫</div><input type="text" class="mc-input task3-input" data-ans="garlic"></div>
            <div class="task-item"><div class="image-placeholder">–ê—Ä–±—É–∑</div><input type="text" class="mc-input task3-input" data-ans="watermelon"></div>
            <div class="task-item"><div class="image-placeholder">–¢—ã–∫–≤–∞</div><input type="text" class="mc-input task3-input" data-ans="pumpkin"></div>
            <div class="task-item"><div class="image-placeholder">–ë–∞–∫–ª–∞–∂–∞–Ω</div><input type="text" class="mc-input task3-input" data-ans="eggplant"></div>
            <div class="task-item"><div class="image-placeholder">–ú–∞–ª–∏–Ω–∞</div><input type="text" class="mc-input task3-input" data-ans="raspberry"></div>
            <div class="task-item"><div class="image-placeholder">–ì–æ–ª—É–±–∏–∫–∞</div><input type="text" class="mc-input task3-input" data-ans="blueberry"></div>
            <div class="task-item"><div class="image-placeholder">–ì—Ä—É—à–∞</div><input type="text" class="mc-input task3-input" data-ans="pear"></div>
            <div class="task-item"><div class="image-placeholder">–ü–µ—Ä—Å–∏–∫</div><input type="text" class="mc-input task3-input" data-ans="peach"></div>
            <div class="task-item"><div class="image-placeholder">–ê–Ω–∞–Ω–∞—Å</div><input type="text" class="mc-input task3-input" data-ans="pineapple"></div>
            <div class="task-item"><div class="image-placeholder">–ú—É–∫–∞</div><input type="text" class="mc-input task3-input" data-ans="flour"></div>
        </div>
        <div class="result-text" id="result-task-3"></div>
        <button class="mc-button" onclick="checkTask3()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    </div>

    <!-- 5. –ó–ê–î–ê–ù–ò–ï 4 (DRAG & DROP) -->
    <div id="page-task-4" class="page">
        <h1>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ4</h1>
        <h2>"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ –≤—Ä–µ–º—è"</h2>
        <p class="instruction">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –±–ª–æ–∫–∏ –∏–∑ —Å—É–Ω–¥—É–∫–∞ –≤ –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏, —á—Ç–æ–±—ã —Å–æ—Å—Ç–∞–≤–∏—Ç—å –≤–µ—Ä–Ω—É—é —Å—Ö–µ–º—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.</p>
        
        <div class="dnd-area">
            <div class="scheme-row">
                <div class="scheme-title">Present Simple:</div>
                <div class="drop-zone-container">
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="subject"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="neg"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="verb"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="other"></div>
                </div>
            </div>

            <div class="scheme-row">
                <div class="scheme-title">Present Continuous:</div>
                <div class="drop-zone-container">
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="subject"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="to_be"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="verb_ing"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="other"></div>
                </div>
            </div>

            <div class="scheme-row">
                <div class="scheme-title">Past Simple:</div>
                <div class="drop-zone-container">
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="subject"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="verb_past"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="other"></div>
                </div>
            </div>

            <div class="scheme-row">
                <div class="scheme-title">Future Simple:</div>
                <div class="drop-zone-container">
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="subject"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="will"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="verb"></div>
                    <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="other"></div>
                </div>
            </div>
        </div>

        <div class="scheme-title">–°—É–Ω–¥—É–∫ –±–ª–æ–∫–æ–≤ (Drag items):</div>
        <div class="items-bank" id="drag-bank" ondrop="drop(event)" ondragover="allowDrop(event)">
            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
        </div>

        <div class="result-text" id="result-task-4"></div>
        <button class="mc-button" onclick="checkTask4()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    </div>

    <!-- 6. –ó–ê–î–ê–ù–ò–ï 5 (WEATHER) -->
    <div id="page-task-5" class="page">
        <h1>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ5</h1>
        <h2>"–°–æ–±–∏—Ä–∞–π—Å—è –ø–æ –ø–æ–≥–æ–¥–µ"</h2>
        <p class="instruction">–ü–æ–≥–æ–¥–Ω—ã–π —Ä–∞–¥–∞—Ä –æ–±–Ω–∞—Ä—É–∂–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã! –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –Ω–∞ —Ä–∞–¥–∞—Ä–µ —Å —Ä—É—Å—Å–∫–æ–≥–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –≤—ã–±—Ä–∞–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É.</p>

        <div class="weather-radar">
            <div class="radar-screen">
                <div class="radar-label">RADAR DETECTED:</div>
                <div class="radar-value" id="weather-question">...</div>
            </div>
            
            <div class="radar-controls" id="weather-options">
                <!-- Buttons injected by JS -->
            </div>
            
            <div class="score-board">
                Score: <span id="weather-score">0</span> / 14
            </div>
        </div>
        <div class="result-text" id="result-task-5"></div>
    </div>

    <!-- 7. –ó–ê–î–ê–ù–ò–ï 6 (PRONOUNS) -->
    <div id="page-task-6" class="page">
        <h1>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ6</h1>
        <h2>"–õ–∏—á–Ω—ã–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è"</h2>
        <p class="instruction">–†–∞—Å—Å—Ç–∞–≤—å—Ç–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏—è –∏–∑ —Å—É–Ω–¥—É–∫–∞ –ø–æ —Å–≤–æ–∏–º –º–µ—Å—Ç–∞–º –≤ —Ç–∞–±–ª–∏—Ü–µ.</p>

        <div class="pronoun-table">
            <div></div> 
            <div class="table-header">–ï–¥. —á.</div>
            <div class="table-header">–ú–Ω. —á.</div>

            <div class="row-label">1 –ª.</div>
            <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="i"></div>
            <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="we"></div>

            <div class="row-label">2 –ª.</div>
            <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="you"></div>
            <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="you"></div>

            <div class="row-label">3 –ª.</div>
            <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="hesheit"></div>
            <div class="drop-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="they"></div>
        </div>

        <div class="scheme-title">–°—É–Ω–¥—É–∫:</div>
        <div class="items-bank" id="bank-task-6" ondrop="drop(event)" ondragover="allowDrop(event)">
            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
        </div>

        <div class="result-text" id="result-task-6"></div>
        <button class="mc-button" onclick="checkTask6()">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç</button>
    </div>

    <!-- –§–ò–ù–ò–® (–° –û–ë–ù–û–í–õ–ï–ù–ù–´–ú –°–ß–ï–¢–ß–ò–ö–û–ú) -->
    <div id="page-finish" class="page">
        <h1>–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!</h1>
        <h2>–í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ —É—Ä–æ–≤–Ω–∏!</h2>
        
        <!-- –ë–õ–û–ö –ò–¢–û–ì–û–í–û–ì–û –°–ß–ï–¢–ê -->
        <div style="background: var(--frame-bg); border: 4px solid var(--color-sand); padding: 20px; margin: 30px 0; text-align: center; box-shadow: 6px 6px 0px rgba(0,0,0,0.5); min-width: 300px;">
            <h3 style="color: var(--color-sand); margin-bottom: 20px; font-size: 1rem; text-shadow: 2px 2px 0 #000;">–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
            <div style="font-size: 0.8rem; line-height: 2; color: white;">
                <p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <span id="final-correct" style="color: var(--correct); font-size: 1.2rem;">0</span></p>
                <p>–û—à–∏–±–æ–∫: <span id="final-wrong" style="color: var(--wrong); font-size: 1.2rem;">0</span></p>
                <p style="margin-top: 15px; border-top: 2px dashed var(--color-med); padding-top: 15px;">
                    –û–±—â–∏–π –±–∞–ª–ª: <span id="final-total" style="color: var(--color-sand); font-size: 1.5rem;">0</span> / <span id="final-max">57</span>
                </p>
            </div>
        </div>

        <div style="font-size: 4rem; margin-bottom: 20px;">üíé</div>
        <p style="font-size: 0.8rem; color: var(--color-light);">Your underwater journey is complete.</p>
        <button class="mc-button" onclick="switchPage('english')">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
    </div>

    <div id="page-math" class="page">
        <h1>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</h1> 
        <a href="index.html"><button class="mc-button" style="background-color: #a1b3d7;">–°–∫–æ—Ä–æ...</button></a>
    </div>

    <!-- JS -->
    <script>
        // --- DATA ---
        const weatherData = [
            {en: "weather", ru: "–ø–æ–≥–æ–¥–∞"}, {en: "Sun", ru: "–°–æ–ª–Ω—Ü–µ"}, {en: "Moon", ru: "–õ—É–Ω–∞"},
            {en: "rain", ru: "–¥–æ–∂–¥—å"}, {en: "cloud", ru: "–æ–±–ª–∞–∫–æ"}, {en: "wind", ru: "–≤–µ—Ç–µ—Ä"},
            {en: "snow", ru: "—Å–Ω–µ–≥"}, {en: "ice", ru: "–ª—ë–¥"}, {en: "fog", ru: "—Ç—É–º–∞–Ω"},
            {en: "temperature", ru: "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞"}, {en: "sunny", ru: "—Å–æ–ª–Ω–µ—á–Ω–æ"}, {en: "rainy", ru: "–¥–æ–∂–¥–ª–∏–≤–æ"},
            {en: "cloudy", ru: "–æ–±–ª–∞—á–Ω–æ"}, {en: "windy", ru: "–≤–µ—Ç—Ä–µ–Ω–æ"}, {en: "snowy", ru: "—Å–Ω–µ–∂–Ω–æ"},
            {en: "cold", ru: "—Ö–æ–ª–æ–¥–Ω–æ"}, {en: "warm", ru: "—Ç–µ–ø–ª–æ"}, {en: "hot", ru: "–≥–æ—Ä—è—á–æ"},
            {en: "tornado", ru: "—Ç–æ—Ä–Ω–∞–¥–æ"}, {en: "blizzard", ru: "–º–µ—Ç–µ–ª—å"}, {en: "lightning", ru: "–º–æ–ª–Ω–∏—è"},
            {en: "sleet", ru: "–¥–æ–∂–¥—å —Å–æ —Å–Ω–µ–≥–æ–º"}, {en: "thunderstorm", ru: "–≥—Ä–æ–∑–∞"}
        ];

        // --- GLOBAL SCORE VARIABLES ---
        let globalCorrect = 0;
        let globalWrong = 0;
        
        // –§–ª–∞–≥–∏, —á—Ç–æ–±—ã –Ω–µ –Ω–∞–∫—Ä—É—á–∏–≤–∞—Ç—å –±–∞–ª–ª—ã –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∫–ª–∏–∫–µ –Ω–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"
        let t1Scored = false;
        let t2Scored = false;
        let t3Scored = false;
        let t4Scored = false;
        let t6Scored = false;

        // --- NAVIGATION ---
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const target = document.getElementById('page-' + pageId);
            if(target) {
                target.classList.add('active');
                target.scrollTop = 0;
            }
        }

        function startTest() {
            // –°–±—Ä–æ—Å –≤—Å–µ–≥–æ (–≤ —Ç–æ–º —á–∏—Å–ª–µ –±–∞–ª–ª–æ–≤)
            globalCorrect = 0;
            globalWrong = 0;
            t1Scored = false; t2Scored = false; t3Scored = false; t4Scored = false; t6Scored = false;
            
            document.querySelectorAll('.mc-input').forEach(inp => {inp.value=''; inp.classList.remove('correct','wrong');});
            document.querySelectorAll('.result-text').forEach(d => d.style.display='none');
            switchPage('task-1');
        }

        function nextTask(currentId, nextId) {
            setTimeout(() => {
                if(nextId === 'task-4') initTask4();
                if(nextId === 'task-5') initTask5();
                switchPage(nextId);
            }, 3000); 
        }

        // --- TASKS 1-3 LOGIC (STANDARD) ---
        function checkInputs(taskNum) {
            const inputs = document.querySelectorAll(`.task${taskNum}-input`);
            let score = 0;
            let wrong = 0;
            
            inputs.forEach(inp => {
                if(inp.value.trim().toLowerCase() === inp.dataset.ans.toLowerCase()) {
                    score++; inp.classList.add('correct'); inp.classList.remove('wrong');
                } else {
                    wrong++; inp.classList.add('wrong'); inp.classList.remove('correct');
                }
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –±–∞–ª–ª—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –¢–û–õ–¨–ö–û –û–î–ò–ù –†–ê–ó
            if (taskNum === 1 && !t1Scored) { globalCorrect += score; globalWrong += wrong; t1Scored = true; }
            if (taskNum === 2 && !t2Scored) { globalCorrect += score; globalWrong += wrong; t2Scored = true; }
            if (taskNum === 3 && !t3Scored) { globalCorrect += score; globalWrong += wrong; t3Scored = true; }

            const res = document.getElementById(`result-task-${taskNum}`);
            res.innerText = `Result: ${score}/${inputs.length}`;
            res.style.display = 'block';
            return score;
        }

        function checkTask1() { checkInputs(1); nextTask('task-1', 'task-2'); }
        function checkTask2() { checkInputs(2); nextTask('task-1', 'task-3'); }
        function checkTask3() { checkInputs(3); nextTask('task-3', 'task-4'); }

        // --- TASK 4: DRAG & DROP ---
        let draggedEl = null;

        function initTask4() {
            document.querySelectorAll('.drop-slot').forEach(slot => slot.innerHTML = '');
            const bank = document.getElementById('drag-bank');
            bank.innerHTML = '';
            
            const blocks = [
                { id: 'b_neg', text: 'don\'t / doesn\'t', type: 'neg' }, 
                { id: 'b_v1', text: '–ì–ª–∞–≥–æ–ª', type: 'verb' },
                { id: 'b_be', text: 'am / is / are', type: 'to_be' }, 
                { id: 'b_ving', text: '–ì–ª–∞–≥–æ–ª + ing', type: 'verb_ing' },
                { id: 'b_vpast', text: '–ì–ª–∞–≥–æ–ª (ed) / V2', type: 'verb_past' },
                { id: 'b_will', text: 'will', type: 'will' },
                { id: 'b_vbase', text: '–ì–ª–∞–≥–æ–ª', type: 'verb' },
                { id: 'sub1', text: '–ü–æ–¥–ª–µ–∂–∞—â–µ–µ', type: 'subject' },
                { id: 'sub2', text: '–ü–æ–¥–ª–µ–∂–∞—â–µ–µ', type: 'subject' },
                { id: 'sub3', text: '–ü–æ–¥–ª–µ–∂–∞—â–µ–µ', type: 'subject' },
                { id: 'sub4', text: '–ü–æ–¥–ª–µ–∂–∞—â–µ–µ', type: 'subject' },
                { id: 'oth1', text: '–ü—Ä–æ—á–µ–µ', type: 'other' },
                { id: 'oth2', text: '–ü—Ä–æ—á–µ–µ', type: 'other' },
                { id: 'oth3', text: '–ü—Ä–æ—á–µ–µ', type: 'other' },
                { id: 'oth4', text: '–ü—Ä–æ—á–µ–µ', type: 'other' }
            ];
            
            blocks.sort(() => Math.random() - 0.5);

            blocks.forEach(b => {
                const el = document.createElement('div');
                el.classList.add('draggable-item');
                el.setAttribute('draggable', 'true');
                el.innerText = b.text;
                el.dataset.type = b.type;
                el.id = b.id;
                el.ondragstart = drag;
                bank.appendChild(el);
            });
            
            document.getElementById('result-task-4').style.display='none';
        }

        function allowDrop(ev) { ev.preventDefault(); }
        function drag(ev) { draggedEl = ev.target; ev.dataTransfer.setData("text", ev.target.id); }
        function drop(ev) {
            ev.preventDefault();
            let target = ev.target;
            if(target.classList.contains('draggable-item')) target = target.parentNode;
            
            if(target.classList.contains('drop-slot') || target.id === 'drag-bank') {
                if(target.classList.contains('drop-slot') && target.children.length > 0) {
                    document.getElementById('drag-bank').appendChild(target.children[0]);
                }
                target.appendChild(draggedEl);
            }
        }

        function checkTask4() {
            let correct = 0;
            const slots = document.querySelectorAll('#page-task-4 .drop-slot');
            let filled = 0;
            const totalSlots = slots.length; 

            slots.forEach(slot => {
                if(slot.children.length > 0) {
                    filled++;
                    if(slot.children[0].dataset.type === slot.dataset.expect) correct++;
                }
            });

            const res = document.getElementById('result-task-4');
            res.style.display = 'block';
            
            if(filled < totalSlots) {
                res.innerText = "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ —è—á–µ–π–∫–∏!";
                res.style.color = "#ff5555";
            } else {
                // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –ü–û–õ–ù–û–ô –ø–æ–ø—ã—Ç–∫–µ
                if (!t4Scored) {
                    globalCorrect += correct;
                    globalWrong += (totalSlots - correct);
                    t4Scored = true;
                }

                res.innerText = `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correct}/${totalSlots}`;
                
                if (correct === totalSlots) {
                     res.style.color = "#55ff55";
                     setTimeout(() => { switchPage('task-5'); initTask5(); }, 3000);
                } else {
                     res.style.color = "#ffaa00";
                     res.innerText += " - –ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ!";
                }
            }
        }

        // --- TASK 5: WEATHER GAME ---
        let weatherScore = 0;
        let weatherRounds = 0;
        const maxRounds = 14;
        let weatherDeck = [];

        function initTask5() {
            weatherScore = 0;
            weatherRounds = 0;
            weatherDeck = [...weatherData];
            weatherDeck.sort(() => Math.random() - 0.5);

            document.getElementById('weather-score').innerText = '0';
            document.getElementById('result-task-5').style.display = 'none';
            nextWeatherQuestion();
        }

        function nextWeatherQuestion() {
            if(weatherRounds >= maxRounds) {
                // –†–∞–¥–∞—Ä –∑–∞–≤–µ—Ä—à–µ–Ω, –¥–æ–±–∞–≤–ª—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫
                globalCorrect += weatherScore;
                globalWrong += (maxRounds - weatherScore);

                const res = document.getElementById('result-task-5');
                res.innerText = "–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!";
                res.style.display = 'block';
                res.style.color = "#55ff55";
                
                setTimeout(() => { switchPage('task-6'); initTask6(); }, 3000);
                return;
            }

            if(weatherDeck.length === 0) weatherDeck = [...weatherData];
            const correctObj = weatherDeck.pop();
            
            let options = [correctObj];
            while(options.length < 4) {
                let r = weatherData[Math.floor(Math.random() * weatherData.length)];
                if(!options.includes(r)) options.push(r);
            }
            options.sort(() => Math.random() - 0.5);

            document.getElementById('weather-question').innerText = correctObj.ru;
            const container = document.getElementById('weather-options');
            container.innerHTML = '';
            
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'radar-btn';
                btn.innerText = opt.en;
                btn.onclick = () => checkWeatherAnswer(btn, opt.en, correctObj.en);
                container.appendChild(btn);
            });
        }

        function checkWeatherAnswer(btn, selected, correct) {
            const btns = document.querySelectorAll('.radar-btn');
            btns.forEach(b => b.onclick = null);

            if(selected === correct) {
                btn.classList.add('correct-choice');
                weatherScore++;
            } else {
                btn.classList.add('wrong-choice');
                btns.forEach(b => { if(b.innerText === correct) b.classList.add('correct-choice'); });
            }
            
            weatherRounds++;
            document.getElementById('weather-score').innerText = weatherScore;
            
            setTimeout(nextWeatherQuestion, 1500);
        }

        // --- TASK 6: PRONOUNS ---
        function initTask6() {
            document.querySelectorAll('#page-task-6 .drop-slot').forEach(s => s.innerHTML = '');
            const bank = document.getElementById('bank-task-6');
            bank.innerHTML = '';

            const pronouns = [
                { id: 'p_i', text: 'I', type: 'i' },
                { id: 'p_we', text: 'We', type: 'we' },
                { id: 'p_you1', text: 'You', type: 'you' },
                { id: 'p_you2', text: 'You', type: 'you' },
                { id: 'p_he', text: 'He / She / It', type: 'hesheit' },
                { id: 'p_they', text: 'They', type: 'they' }
            ];

            pronouns.sort(() => Math.random() - 0.5);

            pronouns.forEach(p => {
                const el = document.createElement('div');
                el.classList.add('draggable-item');
                el.setAttribute('draggable', 'true');
                el.innerText = p.text;
                el.dataset.type = p.type;
                el.id = p.id;
                el.ondragstart = drag; 
                bank.appendChild(el);
            });
            document.getElementById('result-task-6').style.display='none';
        }

        function checkTask6() {
            let correct = 0;
            const slots = document.querySelectorAll('#page-task-6 .drop-slot');
            let filled = 0;

            slots.forEach(slot => {
                if(slot.children.length > 0) {
                    filled++;
                    if(slot.children[0].dataset.type === slot.dataset.expect) correct++;
                }
            });

            const res = document.getElementById('result-task-6');
            res.style.display = 'block';

            if(filled < 6) {
                res.innerText = "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å—é —Ç–∞–±–ª–∏—Ü—É!";
                res.style.color = "#ff5555";
            } else {
                // –§–∏–∫—Å–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–≤–æ–π –ø–æ–ª–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏
                if (!t6Scored) {
                    globalCorrect += correct;
                    globalWrong += (6 - correct);
                    t6Scored = true;
                }

                res.innerText = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${correct}/6`;
                
                if(correct === 6) {
                    res.style.color = "#55ff55";
                    setTimeout(() => { 
                        showFinalScore(); // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–±–ª–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
                        switchPage('finish'); 
                    }, 3000);
                } else {
                    res.style.color = "#ffaa00";
                    res.innerText += " - –ï—Å—Ç—å –æ—à–∏–±–∫–∏!";
                }
            }
        }

        // --- –í–´–í–û–î –ò–¢–û–ì–û–í–û–ì–û –°–ß–ï–¢–ê ---
        function showFinalScore() {
            document.getElementById('final-correct').innerText = globalCorrect;
            document.getElementById('final-wrong').innerText = globalWrong;
            document.getElementById('final-total').innerText = globalCorrect;
            
            // –°—á–∏—Ç–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–π –±–∞–ª–ª: 
            // 6(–∑–∞–¥.1) + 4(–∑–∞–¥.2) + 12(–∑–∞–¥.3) + 15(–∑–∞–¥.4) + 14(–∑–∞–¥.5) + 6(–∑–∞–¥.6) = 57
            document.getElementById('final-max').innerText = "57"; 
        }

        // --- BUBBLES ---
        function createBubbles() {
            const body = document.body;
            for (let i = 0; i < 15; i++) {
                const bubble = document.createElement('div');
                bubble.classList.add('bubble', 'bubble-square');
                const size = Math.random() * 30 + 10 + 'px';
                bubble.style.width = size; bubble.style.height = size;
                bubble.style.left = Math.random() * 100 + 'vw';
                bubble.style.animationDelay = Math.random() * 5 + 's';
                bubble.style.animationDuration = Math.random() * 5 + 5 + 's';
                body.appendChild(bubble);
            }
        }
        window.onload = createBubbles;
    </script>
</body>
</html>